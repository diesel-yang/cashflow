<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
  <title>極速記帳 v3.5</title>
<link rel="apple-touch-icon" href="icons/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32.png">
<link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16.png">
<link rel="manifest" href="./manifest.json">
<meta name="theme-color" content="#12b4c4">
  <link rel="stylesheet" href="./style.css">
</head>
<body>
  <header class="topbar">
    <div class="brand">
      <div class="logo">💨</div>
      <div>
        <div class="brand-name">極速記帳</div>
        <div class="brand-sub">v3.5</div>
      </div>
    </div>

    <div class="space">
      <input id="space-code" class="input" placeholder="共享代號（例如：jackwal）" aria-label="共享代號">
    </div>

    <button id="btn-connect" class="btn">連線</button>
  </header>

  <nav class="tabs">
    <button class="tab active" data-tab="rec">記帳</button>
    <button class="tab" data-tab="xfer">轉帳</button>
    <button class="tab" data-tab="report">報表</button>
    <button class="tab" data-tab="settings">設定</button>
  </nav>

  <main>
    <!-- 記帳頁 -->
    <section id="page-rec" class="page show">
      <!-- 區塊 ①：支出/收入 + 金額 + 日期 -->
      <div class="card">
        <div class="row pack">
          <div class="chip-group" id="chip-io" role="group" aria-label="收支類型">
            <button class="chip pill lg" data-io="expense">支出</button>
            <button class="chip pill lg" data-io="income">收入</button>
          </div>

          <input id="rec-amt" type="number" inputmode="decimal" placeholder="金額" class="amt" aria-label="金額">
          <div class="date-wrap">
            <span class="i i-cal" aria-hidden="true">📅</span>
            <input id="rec-date" type="date" class="elevated" aria-label="日期">
          </div>
        </div>
      </div>

      <!-- 區塊 ②：付款口袋 + 付款人 -->
      <div class="card">
        <div class="section-head">金流</div>

        <div class="row">
          <div class="subhead">付款口袋</div>
        </div>
        <div class="grid grid-3" id="pockets-row" aria-label="付款口袋">
          <!-- 動態注入：餐廳 / JACK / WAL -->
        </div>

        <div class="row mt8">
          <div class="subhead">付款人 / 收款人</div>
        </div>
        <div class="grid grid-3" id="payers-row" aria-label="付款人或收款人">
          <!-- 動態注入：J / W / JW 或 Jack / Wal -->
        </div>
      </div>

      <!-- 區塊 ③：用途 / 分類大項 / 項目 -->
      <div class="card">
        <div class="section-head">用途</div>

        <div class="row">
          <div class="subhead">用途</div>
        </div>
        <div class="chip-group" id="chip-scope" role="group" aria-label="用途">
          <button class="chip pill" data-scope="restaurant">餐廳</button>
          <button class="chip pill" data-scope="personal">個人</button>
        </div>

        <div class="row mt12">
          <div class="subhead">分類大項</div>
        </div>
        <div id="group-grid" class="chip-grid group-grid" aria-label="分類大項"></div>

        <div class="row mt12">
          <div class="subhead">項目</div>
        </div>
        <div id="items-grid" class="chip-grid items" aria-label="項目"></div>

        <div class="row mt12">
          <input id="new-cat-name" class="input flex" placeholder="新增項目名稱…" aria-label="新增項目名稱">
          <button id="btn-add-cat" class="btn">新增項目</button>
        </div>

        <div class="row mt8">
          <input id="rec-note" class="input flex" placeholder="備註（可省略）" aria-label="備註">
          <button id="btn-submit" class="btn">送出</button>
        </div>
      </div>

      <!-- 區塊 ④：最近 20 筆 -->
      <div class="card">
        <div class="section-head">最近 20 筆</div>
        <div id="recent-list" class="list"></div>
      </div>
    </section>

    <!-- 其它頁（佔位） -->
    <section id="page-xfer" class="page">（轉帳頁開發中）</section>
    <section id="page-report" class="page">（報表頁開發中）</section>
    <section id="page-settings" class="page">（設定頁開發中）</section>
  </main>

  <footer class="foot">
    CashFlow v3.5 · Firebase Realtime DB + 本機快取
  </footer>

<script type="module" src="./app.js?v=41"></script>
</body>
</html>
