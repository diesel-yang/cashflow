<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>極速記帳 v3.4</title>
  <link rel="manifest" href="manifest.json">
  <link rel="stylesheet" href="style.css" />
  <meta name="theme-color" content="#0aa7bb"/>
</head>
<body>
<header class="topbar">
  <div class="brand">💨 極速記帳 v3.4</div>
  <div class="space">
    <input id="space-code" placeholder="共享代號（例如 jackwal）" />
    <button id="btn-connect" class="btn sm">連線</button>
  </div>
</header>

<!-- 頁籤 -->
<nav class="tabs">
  <button class="tab active" data-view="book">記帳</button>
  <button class="tab" data-view="transfer">轉帳</button>
  <button class="tab" data-view="report">報表</button>
  <button class="tab" data-view="settings">設定</button>
</nav>

<main>
  <!-- 記帳頁 -->
  <section id="view-book">
    <section class="card">
      <div class="row wrap" style="gap:8px">
        <!-- 支出 / 收入 chips -->
        <div class="chip-group" id="chip-io">
          <button class="chip pill active" data-io="expense">支出</button>
          <button class="chip pill" data-io="income">收入</button>
        </div>

        <!-- 用途：餐廳 / 個人 -->
        <div class="chip-group" id="chip-scope">
          <button class="chip pill active" data-scope="restaurant">餐廳</button>
          <button class="chip pill" data-scope="personal">個人</button>
        </div>

        <!-- 日期 -->
        <input id="rec-date" type="date" class="elevated" />
      </div>

      <!-- 付費口袋 + 三口袋 -->
      <div class="row wrap" style="gap:8px;margin-top:8px">
        <label>付費口袋</label>
        <div class="pockets inline">
          <button class="pocket" data-pk="RESTAURANT">
            <div class="pocket__icon">🏪</div>
            <div class="pocket__name">餐廳</div>
            <div class="pocket__amt" id="pk-rest">—</div>
          </button>
          <button class="pocket" data-pk="JACK">
            <div class="pocket__icon">🧍</div>
            <div class="pocket__name">JACK</div>
            <div class="pocket__amt" id="pk-jack">—</div>
          </button>
          <button class="pocket" data-pk="WAL">
            <div class="pocket__icon">🧍</div>
            <div class="pocket__name">WAL</div>
            <div class="pocket__amt" id="pk-wal">—</div>
          </button>
        </div>

        <label id="lbl-who" style="margin-left:10px">付款人</label>
        <div class="chip-group" id="chip-who"></div>

        <input id="rec-amt" type="number" inputmode="decimal" placeholder="金額" style="margin-left:auto;min-width:120px">
      </div>

      <!-- 群組 / 細項 -->
      <div id="group-panel" class="chip-grid"></div>
      <div id="items-panel" class="chip-grid soft" style="display:none"></div>

      <!-- 手動新增 -->
      <div class="row wrap" style="gap:8px;margin-top:8px">
        <input id="rec-item" placeholder="新增項目" />
        <select id="rec-manual-cat"></select>
        <input id="rec-note" placeholder="備註（選填）" />
        <button id="rec-submit" class="btn">送出</button>
      </div>
    </section>

    <!-- 最近紀錄 -->
    <section class="card">
      <div class="row between"><b>最近 20 筆</b><small class="muted" id="rec-count">0</small></div>
      <ul id="recent-list" class="list"></ul>
    </section>
  </section>

  <!-- 其他頁 -->
  <section id="view-transfer" style="display:none" class="card"><b>轉帳（開發中）</b></section>
  <section id="view-report" style="display:none" class="card"><b>報表（開發中）</b></section>
  <section id="view-settings" style="display:none" class="card"><b>設定（開發中）</b></section>
</main>

<footer class="ft">Made for Jack & Wal · Firebase Realtime DB + 本機快取</footer>

<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-database-compat.js"></script>

<script src="app.js"></script>
<script>
if ('serviceWorker' in navigator) {
  navigator.serviceWorker.register('sw.js');
}
</script>
</body>
</html>
