<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>CashFlow v3.5</title>
  <link rel="manifest" href="manifest.json">
  <link rel="stylesheet" href="style.css" />
  <meta name="theme-color" content="#0aa7bb"/>
</head>
<body>

<header class="topbar">
  <div class="tabs">
    <button class="tab active" data-view="book">記帳</button>
    <button class="tab" data-view="transfer">轉帳</button>
    <button class="tab" data-view="report">報表</button>
    <button class="tab" data-view="settings">設定</button>
  </div>
  <div class="space">
    <input id="space-code" placeholder="共享代號（例如 jackwal）" />
    <button id="btn-connect" class="btn danger" data-state="off">未連線</button>
  </div>
</header>
  <main>
    <!-- 記帳頁 -->
    <section id="page-rec" class="page show">
      <div class="card">

        <!-- 列 1：支出/收入 + 金額 + 日期 -->
        <div class="row stack">
          <div class="chip-group" id="chip-io">
            <button class="chip pill lg" data-io="expense">支出</button>
            <button class="chip pill lg" data-io="income">收入</button>
          </div>

          <input id="rec-amt" type="number" inputmode="decimal" placeholder="金額" class="amt">
          <input id="rec-date" type="date" class="elevated">
        </div>

        <!-- 列 2：付費口袋（或收款人） / 付款人 -->
        <div class="row split">
          <div class="pockets" id="pockets-row">
            <!-- 動態注入：餐廳 / JACK / WAL 三個口袋 -->
          </div>
          <div class="payers" id="payers-row">
            <!-- 動態注入：J / W / JW 三個付款人 -->
          </div>
        </div>

        <!-- 列 3：用途（餐廳 / 個人） -->
        <div class="row">
          <div class="chip-group" id="chip-scope">
            <button class="chip pill" data-scope="restaurant">餐廳</button>
            <button class="chip pill" data-scope="personal">個人</button>
          </div>
        </div>

        <!-- 列 4：大項群組（餐廳：營業收入／銷貨成本…；個人：薪資收入／投資獲利／…） -->
        <div class="row">
          <div id="group-grid" class="chip-grid"></div>
        </div>

        <!-- 列 5：該大項下的細項 -->
        <div class="row">
          <div id="items-grid" class="chip-grid items"></div>
        </div>

        <!-- 列 6：新增項目（使用目前選到的大項作為 kind，無需下拉） -->
        <div class="row">
          <input id="new-cat-name" class="input flex" placeholder="新增項目名稱…">
          <button id="btn-add-cat" class="btn">新增項目</button>
        </div>

        <!-- 列 7：備註 + 送出 -->
        <div class="row">
          <input id="rec-note" class="input flex" placeholder="備註（可省略）">
          <button id="btn-submit" class="btn">送出</button>
        </div>
      </div>

      <div class="card">
        <div class="section-title">最近 20 筆</div>
        <div id="recent-list" class="list"></div>
      </div>
    </section>

    <!-- 其它頁面（佔位） -->
    <section id="page-xfer" class="page">（轉帳頁開發中）</section>
    <section id="page-report" class="page">（報表頁開發中）</section>
    <section id="page-settings" class="page">（設定頁開發中）</section>
  </main>

  <footer class="foot">
    CashFlow v3.5 · Firebase Realtime DB + 本機快取
  </footer>

  <template id="tpl-pocket">
    <button class="pocket">
      <span class="pocket-emoji">🏦</span>
      <span class="pocket-name">餐廳</span>
      <span class="balance">0</span>
    </button>
  </template>

  <template id="tpl-payer">
    <button class="chip pill payer">J</button>
  </template>

  <script type="module" src="./app.js"></script>
</body>
</html>
