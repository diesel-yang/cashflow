/* 極速記帳：深色高對比（mobile-first） */
:root{
  --bg:#0a0f11;
  --card:#10191c;
  --text:#f3fbfd;
  --muted:#a8c0c7;
  --primary:#12b4c4;
  --primary-weak:#0f8f9b;
  --accent:#12b4c4;
  --border:#203033;
  --chip-bg:#0f1719;
  --chip-active:#0f2f35;
  --badge:#0d2226;
  --pos:#76e3a8;
  --neg:#ff9aa0;
}
*{box-sizing:border-box}
html,body{
  margin:0; padding:0;
  font-family:-apple-system,BlinkMacSystemFont,Inter,'Noto Sans TC','Segoe UI',Roboto,Arial;
  background:var(--bg); color:var(--text);
  -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
}
img{max-width:100%; display:block}
.hidden{display:none!important}
.muted{color:var(--muted)}
.mt8{margin-top:8px}.mt12{margin-top:12px}
.flex{flex:1}

/* Topbar & Tabs */
.topbar{
  display:flex; align-items:center; gap:12px;
  padding:10px 12px; position:sticky; top:0; z-index:3; background:var(--bg);
}
.brand{display:flex; align-items:center; gap:8px}
.brand .logo{font-size:26px}
.brand-name{font-weight:700}
.brand-sub{font-size:.8rem; color:var(--muted)}
.space{flex:1}
.input{
  width:100%; background:var(--chip-bg); color:var(--text);
  border:1px solid var(--border); border-radius:12px; padding:12px 14px; font-size:18px;
}
.btn{
  background:var(--primary); color:#001114; border:none;
  font-weight:700; cursor:pointer; font-size:18px;
}
.btn.danger{background:#dc5b6b; color:#fff}
.btn.success{background:#2ac3a2; color:#001114}

.tabs{
  display:flex; gap:8px; padding:8px 12px; position:sticky; top:54px; background:var(--bg); z-index:2;
}
.tab{
  border:1px solid var(--border); background:var(--chip-bg); color:var(--text);
  padding:10px 14px; border-radius:999px; cursor:pointer; font-size:16px;
}
.tab.active{background:var(--chip-active); border-color:var(--primary)}

main{padding:8px 12px; display:grid; gap:12px}
.page{display:none}
.page.show{display:block}

/* Cards */
.card{
  background:var(--card); border:1px solid var(--border);display:grid; gap:12px;
  box-shadow:0 0 0 1px rgba(255,255,255,0.03) inset;
}
.section-head{font-size:16px; font-weight:800; letter-spacing:.04em}
.subhead{font-size:15px; font-weight:700; color:var(--muted)}
.row{display:flex; align-items:center; gap:10px; flex-wrap:wrap}
.pack{justify-content:space-between}

/* Chips */
.chip{
  border:1px solid var(--border); background:var(--chip-bg); color:var(--text);
  cursor:pointer; display:inline-flex; align-items:center; gap:8px;font-size:18px;
  transition:background .15s ease, border-color .15s ease, box-shadow .15s ease;
}
.chip.pill{border-radius:999px}
.chip.box{width:100%; justify-content:flex-start}
.chip.active{background:var(--chip-active); border-color:var(--primary); box-shadow:0 0 0 1px var(--primary) inset}

/* Grids */
.grid{display:grid; gap:10px}
.grid-3{grid-template-columns:repeat(3,1fr)}
.chip-grid{display:grid; gap:10px}
.group-grid{grid-template-columns:repeat(2,1fr)}
@media (min-width:520px){ .group-grid{grid-template-columns:repeat(3,1fr)} }
.items{grid-template-columns:repeat(3,1fr)}

/* Inputs */
.amt{
  min-width:160px; background:var(--chip-bg); color:var(--text);
  border:1px solid var(--border); font-size:18px;
  font-variant-numeric:tabular-nums;
}
.elevated{
  bborder:1px solid var(--border);
  background:var(--chip-bg); color:var(--text); font-size:18px;
}
input::placeholder{color:var(--muted)}
.date-wrap{display:flex; align-items:center; gap:8px}
.i-cal{filter:brightness(1.2)}

/* Pockets (SVG pig + 金額) */
#pockets-row{display:grid; grid-template-columns:repeat(3,1fr); gap:12px}
.pocket{
  display:flex; align-items:center; gap:10px;
  border:1px solid var(--border); background:var(--card);
  border-radius:14px; padding:10px 12px; cursor:pointer;
  transition:transform .05s ease, box-shadow .15s ease, border-color .15s ease;
}
.pocket:hover{ transform:translateY(-1px) }
.pocket.active{ border-color:var(--accent); box-shadow:0 0 0 3px color-mix(in srgb, var(--accent) 25%, transparent) }
.pocket .pig{ width:44px; height:44px; color:#93a2ad }
.pocket .meta{ display:flex; flex-direction:column; line-height:1.15 }
.pocket .name{ font-size:14px; color:var(--muted) }
.pocket .amt{ font-size:20px; font-weight:800 }

/* Recent */
.list{display:grid; gap:8px}
.list .row{
  display:grid; grid-template-columns: 95px 1fr auto;
  gap:8px; align-items:center; padding:10px;
  border:1px solid var(--border); border-radius:12px;
}
.list .r-amt{font-weight:800}
.list .r-amt.pos{color:var(--pos)}
.list .r-amt.neg{color:var(--neg)}

/* Footer */
.foot{padding:16px 12px; color:var(--muted); text-align:center}

/* Mobile */
@media (max-width:480px){
  .topbar{flex-wrap:wrap}
  .tabs{top:auto; position:static}
  .items{grid-template-columns:repeat(2,1fr)}
  .list .row{grid-template-columns:84px 1fr auto}
}

/* Focus */
:where(button,.chip,.pocket,input):focus-visible{
  outline:2px solid var(--primary); outline-offset:2px;
}

/* 口袋不同顏色（可選） */
.pocket.restaurant .pig{ color:#12b4c4 }
.pocket.jack .pig{ color:#f39c12 }
.pocket.wal .pig{ color:#e74c3c }

/* ====== Mobile-friendly tweaks (override) ====== */
html { font-size: clamp(16px, 1.8vw + 12px, 19px); }
body { line-height: 1.45; }

.card { padding: 14px 14px 16px; border-radius: 18px; }
.chip { min-height: 50px; padding: 12px 14px; border-radius: 14px; }
.chip.lg { font-size: 1rem; }
.input, .amt, .elevated { padding: 13px 14px; border-radius: 14px; }
.btn { padding: 13px 16px; border-radius: 14px; }

/* 讓主要兩欄（IO/金額/日期）排得更穩定 */
.row.pack { gap: 10px; }
#rec-amt { flex: 1 1 140px; }
.date-wrap { flex: 0 0 auto; }

/* Pocket 與付款人區塊：統一卡片尺寸與間距 */
.grid-3, #payers-row, #pockets-row { grid-template-columns: repeat(3, 1fr); gap: 12px; }
@media (max-width: 380px){
  .grid-3, #payers-row, #pockets-row { grid-template-columns: repeat(3, 1fr); gap: 10px; }
}

/* 最近 20 筆：金額顏色與字級更清楚 */
.list .row { background: var(--chip-bg); }
.list .r-date { color: #fff; opacity: .85; }   /* <- 需求#4 改白色 */
.list .r-amt  { color: #fff; font-size: 1.02rem; }

/* 付款人（J/W/JW）與 IO/用途（餐廳/個人）的「高亮」樣式一致 */
.chip.is-option.active,
#chip-io .chip.active,
#chip-scope .chip.active,
#payers-row .chip.active {
  background: var(--chip-active);
  border-color: var(--primary);
  box-shadow: 0 0 0 2px color-mix(in srgb, var(--primary) 35%, transparent) inset;
}

/* 用途：讓文字在左、選項在右（需求#3） */
.scope-row { display:flex; align-items:center; justify-content:space-between; gap:10px; }
.scope-row .subhead { margin:0; }
.scope-row .chip-group { display:flex; gap:10px; }

